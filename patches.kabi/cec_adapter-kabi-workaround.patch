From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for cec_adapter
Patch-mainline: Never, kABI workaround
References: CVE-2024-23848 bsc#1219104

Add a standard trick for the newly added bool in struct cec_adapter
for keeping the kABI.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/media/cec.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/include/media/cec.h
+++ b/include/media/cec.h
@@ -168,7 +168,6 @@ struct cec_adapter {
 
 	u16 phys_addr;
 	bool needs_hpd;
-	bool is_claiming_log_addrs;
 	bool is_configuring;
 	bool is_configured;
 	u32 monitor_all_cnt;
@@ -176,7 +175,10 @@ struct cec_adapter {
 	struct cec_fh *cec_follower;
 	struct cec_fh *cec_initiator;
 	bool passthrough;
+#ifndef __GENKSYMS__
 	bool transmit_in_progress_aborted:1;
+	bool is_claiming_log_addrs:1;
+#endif
 	struct cec_log_addrs log_addrs;
 
 #ifdef CONFIG_CEC_NOTIFIER
